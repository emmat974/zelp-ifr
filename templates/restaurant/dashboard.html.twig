{% extends "base.html.twig" %}

{% block body %}
    <div class="row">
        <h1 class="fs-2"> <i class="fa-regular fa-face-smile-beam"></i> Bonjour {{ app.user.fullname }} </h1>
    </div>

    <div class="row">
        <div class="col-lg-3 col-md-12">
        <a href="{{ path('app_restaurant_new') }}" class="text-decoration-none">
            <div class="card text-white bg-primary mb-3" >
                <div class="card-header"><i class="fa-solid fa-utensils"></i> Mes restaurants</div>
                <div class="card-body">
                    <h4 class="card-title fs-5">Ajouter un nouveau restaurant</h4>
                </div>
            </div>
        </a>
        </div>

        <div class="col-lg-3 col-md-12">
            <div class="card text-white bg-secondary mb-3" >
                <div class="card-header"><i class="fa-solid fa-comment"></i> Mes avis</div>
                <div class="card-body">
                    <h4 class="card-title fs-5">Gerez mes avis</h4>
                </div>
            </div>
        </div>
    </div>
    <hr />
    <div class="row my-2">
        <div class="col-lg-12 col-md-12">
            <h2 class="fs-4"> Vos restaurants </h2>
        </div>

<table class="table table-hover">
<thead>
    <tr>
    <th scope="col">Nom</th>
    <th scope="col">Lieux</th>
    <th scope="col">Note</th>
    <th scope="col">Dernière mise à jour</th>
    <th scope="col">Actions</th>

    </tr>
</thead>
    <tbody>
        {% for restaurant in restaurants %}
        <tr>
            <th scope="row"><a href="{{ path('app_restaurant_show', {id: restaurant.id}) }}"> {{ restaurant.name }} </a></th>
            <td>{{ restaurant.ville }}</td>
            <td>{{ restaurant.avis|average }}/5</td>
            <td>{{ restaurant.updatedAt|date("d/m/Y") }}</td>
            <td><a href="{{ path('app_restaurant_edit', {id: restaurant.id}) }}" class="btn btn-dark"> <i class="fa-solid fa-pen-to-square"></i> </a>  {{ include('restaurant/_delete_form.html.twig') }}</td>
            </tr>
        <tr>
        {% else %}
        <tr>
            <th> Vous n'avez pas encore créer de fiche pour votre restaurant ! </th>
        </tr>
        {% endfor %}
    </tbody>
</table>
    </div>
{% endblock %}